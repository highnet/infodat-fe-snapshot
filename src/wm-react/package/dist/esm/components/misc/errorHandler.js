/* @copyright Stadt Wien - Wiener Melange 200 */
import{dispatchCustomEvent as r}from"./utils.js";import{errorTracker as e}from"./error-tracking.js";import{ErrorStateController as t}from"./error-state-controller.js";import"../../unsafe-html-4e49b66a.js";import"../../lit-html-34d0b6a8.js";import"../../directive-16e189ed.js";const o=(r,e,o={})=>{r._errorController&&r._errorController instanceof t?r._errorController.setError(e,o):a(r,e)},i=(r,e)=>{console.warn("applyErrorState is deprecated. Use setError() instead."),o(r,e)};function s(r){r&&(r._errorController&&r._errorController instanceof t?r._errorController.clearError():a(r,""))}const n=r=>class extends r{showError(r){console.warn("showError is deprecated. Use ErrorStateController instead."),this._errorController&&this._errorController instanceof t?this._errorController.setError(r):o(this,r)}clearError(){this._errorController&&this._errorController instanceof t?this._errorController.clearError():o(this,"")}validate(){if(this._errorController&&this._errorController instanceof t)return this._errorController.validate();const r="function"==typeof this._validateWithoutController?this._validateWithoutController():"";return r?(this.showError(r),!1):(this.clearError(),!0)}};function l(r,t,o){if(r&&t&&o)if("function"!=typeof t.updateWithErrors)try{for(;t.firstChild;)t.removeChild(t.firstChild);e.reset();const i=new Set;r.forEach((r=>{if(!r.id)return;if(i.has(r.id)||e.isErrorSuppressed(r.id))return;i.add(r.id);const s=o.content.cloneNode(!0),n=s.querySelector("li").querySelector("a");n&&(n.href=`#${r.id}`,n.textContent=r.summaryMsg||r.msg),t.appendChild(s)})),"errors"in t&&(t.errors=i.size)}catch(r){console.error("Error updating error summary:",r)}else{const i=r.filter((r=>!r.id||!e.isErrorSuppressed(r.id)));t.updateWithErrors(i,o)}else console.error("Missing required parameters for updateErrorSummary")}function a(e,o,i={}){if(console.warn("setErrorState is deprecated. Use setError() instead."),!e)return;if(e._errorController instanceof t)return void e._errorController.setError(o,i);if("function"==typeof e._synchronizeErrorState)return void e._synchronizeErrorState(o);e.hasError=!!o,e.error=o||"";const s=e._item||e.selectElement||e.shadowRoot?.querySelector("input, select, textarea");if(s)if(o){s.setAttribute("aria-invalid","true");try{s.setCustomValidity(o)}catch(r){console.warn("Error setting custom validity:",r)}}else{s.removeAttribute("aria-invalid");try{s.setCustomValidity("")}catch(r){console.warn("Error clearing custom validity:",r)}}if(e._internals)try{o?e._internals.setValidity({customError:!0},o,s||e):e._internals.setValidity({},"",s||e)}catch(r){console.warn("Error updating form internals validity",r)}r(e,o?"invalid":"valid",{value:e.value,message:o||""})}function c(r){console.warn("clearErrorState is deprecated. Use clearError() instead."),s(r)}export{o as applyError,i as applyErrorState,s as clearError,s as clearErrorMessage,c as clearErrorState,n as errorMixin,o as setError,a as setErrorState,l as updateErrorSummary};
